<!DOCTYPE html>
<html lang="ur">
<head>
<meta charset="UTF-8">
<title>Islamic University Result System</title>
<style>
body{font-family:Noto Nastaliq Urdu,sans-serif;background:#eef2ee;margin:0;padding:20px;direction:rtl}
h2,h3{text-align:center;color:#1f4f46}
.box{background:#fff;padding:15px;margin-bottom:15px;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,.1)}
input,select,textarea,button{width:100%;padding:8px;margin:5px 0;border-radius:5px;border:1px solid #ccc}
button{background:#1f4f46;color:#fff;border:none;cursor:pointer}
button.del{background:red;padding:4px 8px;margin-left:5px}
.small{font-size:12px;color:gray;margin-top:3px}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ccc;padding:6px;text-align:center}
.pass{color:green;font-weight:bold}
.fail{color:red;font-weight:bold}
</style>
</head>
<body>

<h2>Ø§Ø³Ù„Ø§Ù…Ú© ÛŒÙˆÙ†ÛŒÙˆØ±Ø³Ù¹ÛŒ Ø³Ø³Ù¹Ù…</h2>

<!-- LOGIN BOX -->
<div class="box" id="loginBox">
<h3>ğŸ” Ø§ÛŒÚˆÙ…Ù† Ù„Ø§Ú¯ Ø§ÙÙ†</h3>
<input type="password" id="loginPass" placeholder="Ù¾Ø§Ø³ ÙˆØ±Úˆ">
<button onclick="login()">Ù„Ø§Ú¯ Ø§ÙÙ†</button>
<button onclick="resetPass()">Forgot Password</button>
<p class="small">ÚˆÛŒÙØ§Ù„Ù¹ Ù¾Ø§Ø³ ÙˆØ±Úˆ: <b>1234</b></p>
<p id="loginMsg" class="small"></p>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" style="display:none">

<div class="box">
<h3>ğŸ“š Ú©ØªØ§Ø¨ Ù…ÛŒÙ†Ø¬Ù…Ù†Ù¹ (Class Wise)</h3>
<select id="classSelect" onchange="renderBooks()"></select>
<textarea id="newBook" placeholder="Ú©ØªØ§Ø¨ÛŒÚº comma Ø³Û’ Ø§Ù„Ú¯ Ú©Ø±ÛŒÚº"></textarea>
<button onclick="addBook()">â• Add Book</button>
<table>
<thead><tr><th>Ú©ØªØ§Ø¨</th><th>Ø¹Ù…Ù„</th></tr></thead>
<tbody id="bookTable"></tbody>
</table>
</div>

<div class="box">
<h3>ğŸ“Š Ø±Ø²Ù„Ù¹</h3>
<input id="rollNo" placeholder="Ø±ÙˆÙ„ Ù†Ù…Ø¨Ø±">
<input id="stuName" placeholder="Ø·Ø§Ù„Ø¨ Ø¹Ù„Ù… Ú©Ø§ Ù†Ø§Ù…">
<input id="fatherName" placeholder="ÙˆØ§Ù„Ø¯ Ú©Ø§ Ù†Ø§Ù…">
<select id="stuClass"></select>
<select id="stuGender">
<option>Talib-e-Ilm</option>
<option>Talibat</option>
<option>Male</option>
<option>Female</option>
</select>
<input id="m1" placeholder="Book 1 Marks">
<input id="m2" placeholder="Book 2 Marks">
<input id="m3" placeholder="Book 3 Marks">
<input id="m4" placeholder="Book 4 Marks">
<input id="m5" placeholder="Book 5 Marks">
<input id="m6" placeholder="Book 6 Marks">
<button onclick="saveResult()">ğŸ’¾ Save / Update Result</button>
<button onclick="deleteResult()">âŒ Delete Result</button>
</div>

<div class="box">
<h3>ğŸ” Ù¾Ø§Ø³ ÙˆØ±Úˆ Ú†ÛŒÙ†Ø¬</h3>
<input type="password" id="newPass" placeholder="Ù†ÛŒØ§ Ù¾Ø§Ø³ ÙˆØ±Úˆ">
<button onclick="changePass()">Ú†ÛŒÙ†Ø¬ Ú©Ø±ÛŒÚº</button>
</div>

<button onclick="logout()">ğŸ”™ Back / Logout</button>
<p id="adminMsg" class="small"></p>
</div>

<!-- STUDENT RESULT VIEW -->
<div class="box">
<h3>ğŸ“ Student Result Check</h3>
<input id="searchRoll" placeholder="Roll Number">
<select id="searchClass"></select>
<button onclick="showResult()">Show Result</button>
<div id="resultBox"></div>
</div>

<!-- Audio -->
<audio id="passSound"><source src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="failSound"><source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>

<script>
let classes=["Ø§Ø¨ØªØ¯Ø§Ø¦ÛŒÛ","Ù…ØªÙˆØ³Ø·Û","Ø®Ø§ØµÛ Ø§ÙˆÙ„","Ø®Ø§ØµÛ Ø¯ÙˆÙ…","Ø¹Ø§Ù„ÛŒÛ","Ø¯ÙˆØ±Û‚ Ø­Ø¯ÛŒØ«"];
let books=JSON.parse(localStorage.getItem("books"))||{};
let results=JSON.parse(localStorage.getItem("results"))||{};
let adminPass=localStorage.getItem("adminPass")||"1234";

/* Populate class selects */
classes.forEach(c=>{
if(!books[c]) books[c]=[];
classSelect.innerHTML+=`<option>${c}</option>`;
stuClass.innerHTML+=`<option>${c}</option>`;
searchClass.innerHTML+=`<option>${c}</option>`;
});

/* ===== Admin Login ===== */
function login(){
if(loginPass.value===adminPass){
loginBox.style.display="none";
adminPanel.style.display="block";
renderBooks();
}else loginMsg.innerText="ØºÙ„Ø· Ù¾Ø§Ø³ ÙˆØ±Úˆ";
}
function logout(){location.reload();}
function resetPass(){
adminPass="1234"; localStorage.setItem("adminPass",adminPass);
alert("Password reset: 1234");
}
function changePass(){
adminPass=newPass.value;
localStorage.setItem("adminPass",adminPass);
adminMsg.innerText="Password changed";
}

/* ===== Book Management ===== */
function renderBooks(){
let c=classSelect.value;
bookTable.innerHTML="";
(books[c]||[]).forEach((b,i)=>{
bookTable.innerHTML+=`<tr>
<td><input value="${b}" onchange="editBook('${c}',${i},this.value)"></td>
<td><button class="del" onclick="delBook('${c}',${i})">âŒ</button></td>
</tr>`;
});
localStorage.setItem("books",JSON.stringify(books));
}
function addBook(){
let c=classSelect.value;
newBook.value.split(",").forEach(b=>{
if(b.trim()) books[c].push(b.trim());
});
newBook.value=""; renderBooks();
}
function editBook(c,i,val){books[c][i]=val; localStorage.setItem("books",JSON.stringify(books));}
function delBook(c,i){if(confirm("Ú©ØªØ§Ø¨ ÚˆÛŒÙ„ÛŒÙ¹ Ú©Ø±ÛŒÚºØŸ")){books[c].splice(i,1); renderBooks();}}

/* ===== Result Management ===== */
function saveResult(){
let key=rollNo.value+"-"+stuClass.value;
results[key]={
name:stuName.value,
father:fatherName.value,
class:stuClass.value,
gender:stuGender.value,
marks:[+m1.value,+m2.value,+m3.value,+m4.value,+m5.value,+m6.value]
};
localStorage.setItem("results",JSON.stringify(results));
alert("Result Saved");
}
function deleteResult(){
let key=rollNo.value+"-"+stuClass.value;
delete results[key]; localStorage.setItem("results",JSON.stringify(results));
alert("Result Deleted");
}

/* ===== Student View ===== */
function showResult(){
let key=searchRoll.value+"-"+searchClass.value;
let s=results[key];
if(!s){resultBox.innerHTML="<p class='fail'>Result Not Found</p>"; return;}
let total=s.marks.reduce((a,b)=>a+b,0);
let status=total>=240?"<span class='pass'>Ú©Ø§Ù…ÛŒØ§Ø¨</span>":"<span class='fail'>Ù†Ø§Ú©Ø§Ù…</span>";
resultBox.innerHTML=`<b>Ù†Ø§Ù…:</b> ${s.name}<br>
<b>ÙˆØ§Ù„Ø¯:</b> ${s.father}<br>
<b>Ø¬Ù†Ø³:</b> ${s.gender}<br>
<b>Ú©Ù„ Ù†Ù…Ø¨Ø±:</b> ${total}<br>
<b>Ù†ØªÛŒØ¬Û:</b> ${status}`;
if(total>=240) passSound.play(); else failSound.play();
}
</script>
</body>
</html>
