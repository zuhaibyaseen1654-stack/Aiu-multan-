<!DOCTYPE html>
<html lang="ur">
<head>
<meta charset="UTF-8">
<title>Anwar-ul-Uloom Islamic University</title>
<style>
body{font-family:Arial;background:#eef2ee;direction:rtl;margin:0}
.container{max-width:1200px;margin:auto;padding:15px}
.card{background:#fff;padding:15px;margin-bottom:15px;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,.1)}
h2,h3{text-align:center;color:#1f4f46}
input,select,textarea,button{width:100%;padding:8px;margin-top:6px}
button{background:#1f4f46;color:#fff;border:none;cursor:pointer}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ccc;padding:6px;text-align:center}
.pass{color:green;font-weight:bold}
.fail{color:red;font-weight:bold}
.small-btn{padding:4px 8px;font-size:12px;margin:2px}
</style>
</head>

<body>
<div class="container">

<h2>Anwar-ul-Uloom Islamic University</h2>

<!-- LOGIN -->
<div class="card" id="loginBox">
<h3>ğŸ” Admin Login</h3>
<input type="password" id="loginPass" placeholder="Password">
<button onclick="login()">Login</button>
<button onclick="resetPassword()">Forgot Password</button>
<p id="loginMsg"></p>
</div>

<!-- ADMIN PANEL -->
<div class="card" id="adminBox" style="display:none">
<h3>â• Admin Panel</h3>

<div class="grid">
<input id="roll" placeholder="Roll Number">
<input id="name" placeholder="Student Name">
<input id="father" placeholder="Father Name">

<select id="className" onchange="renderBookList()">
<option>Ø§Ø¨ØªØ¯Ø§Ø¦ÛŒÛ</option>
<option>Ù…ØªÙˆØ³Ø·Û</option>
<option>Ø®Ø§ØµÛ Ø§ÙˆÙ„</option>
<option>Ø®Ø§ØµÛ Ø¯ÙˆÙ…</option>
<option>Ø¹Ø§Ù„ÛŒÛ</option>
<option>Ø¯ÙˆØ±Û‚ Ø­Ø¯ÛŒØ«</option>
</select>

<select id="gender">
<option>Talib-e-Ilm</option>
<option>Talibat</option>
<option>Male</option>
<option>Female</option>
</select>
</div>

<div class="grid">
<input id="m1" placeholder="Book 1 Marks">
<input id="m2" placeholder="Book 2 Marks">
<input id="m3" placeholder="Book 3 Marks">
<input id="m4" placeholder="Book 4 Marks">
<input id="m5" placeholder="Book 5 Marks">
<input id="m6" placeholder="Book 6 Marks">
</div>

<button onclick="saveResult()">ğŸ’¾ Save / Update Result</button>
<button onclick="deleteResult()">âŒ Delete Result</button>

<hr>

<h3>ğŸ“š Class Wise Books Manager</h3>

<textarea id="newBook" placeholder="Ù†Ø¦ÛŒ Ú©ØªØ§Ø¨ Ú©Ø§ Ù†Ø§Ù… Ù„Ú©Ú¾ÛŒÚº"></textarea>
<button onclick="addBook()">â• Add Book</button>

<table>
<thead>
<tr><th>Ú©ØªØ§Ø¨</th><th>Ø¹Ù…Ù„</th></tr>
</thead>
<tbody id="bookTable"></tbody>
</table>

<hr>

<h3>ğŸ” Change Password</h3>
<input id="newPass" placeholder="New Password">
<button onclick="changePassword()">Change Password</button>

<hr>

<h3>ğŸ’¾ Backup</h3>
<button onclick="downloadBackup()">â¬‡ Download Backup</button>
<input type="file" id="importFile">
<button onclick="importBackup()">â¬† Import Backup</button>

<p id="adminMsg"></p>
</div>

<!-- STUDENT RESULT -->
<div class="card">
<h3>ğŸ“ Student Result</h3>
<input id="searchRoll" placeholder="Roll Number">
<select id="searchClass">
<option>Ø§Ø¨ØªØ¯Ø§Ø¦ÛŒÛ</option>
<option>Ù…ØªÙˆØ³Ø·Û</option>
<option>Ø®Ø§ØµÛ Ø§ÙˆÙ„</option>
<option>Ø®Ø§ØµÛ Ø¯ÙˆÙ…</option>
<option>Ø¹Ø§Ù„ÛŒÛ</option>
<option>Ø¯ÙˆØ±Û‚ Ø­Ø¯ÛŒØ«</option>
</select>
<button onclick="showResult()">Show Result</button>
<div id="resultBox"></div>
</div>

</div>

<script>
let adminPassword=localStorage.getItem("adminPassword")||"Qamar1654";
let students=JSON.parse(localStorage.getItem("students"))||{};
let books=JSON.parse(localStorage.getItem("books"))||{
"Ø§Ø¨ØªØ¯Ø§Ø¦ÛŒÛ":[],
"Ù…ØªÙˆØ³Ø·Û":[],
"Ø®Ø§ØµÛ Ø§ÙˆÙ„":["ØªØ±Ø¬Ù…Ûƒ Ø§Ù„Ù‚Ø±Ø¢Ù†","Ø±ÛŒØ§Ø¶ Ø§Ù„ØµØ§Ù„Ø­ÛŒÙ†"],
"Ø®Ø§ØµÛ Ø¯ÙˆÙ…":["Ø¬Ù„Ø§Ù„ÛŒÙ† Ø§ÙˆÙ„","ÛØ¯Ø§ÛŒÛ Ø§ÙˆÙ„"],
"Ø¹Ø§Ù„ÛŒÛ":[],
"Ø¯ÙˆØ±Û‚ Ø­Ø¯ÛŒØ«":["Ø¨Ø®Ø§Ø±ÛŒ","Ù…Ø³Ù„Ù…","ØªØ±Ù…Ø°ÛŒ","Ù†Ø³Ø§Ø¦ÛŒ","Ø§Ø¨Ù† Ù…Ø§Ø¬Û"]
};

function saveBooks(){localStorage.setItem("books",JSON.stringify(books));}

function login(){
if(loginPass.value===adminPassword){
loginBox.style.display="none";
adminBox.style.display="block";
renderBookList();
}else loginMsg.innerText="ØºÙ„Ø· Ù¾Ø§Ø³ÙˆØ±Úˆ";
}

function resetPassword(){
adminPassword="Qamar1654";
localStorage.setItem("adminPassword",adminPassword);
alert("Password reset: Qamar1654");
}

function changePassword(){
adminPassword=newPass.value;
localStorage.setItem("adminPassword",adminPassword);
adminMsg.innerText="Password Changed";
}

function saveResult(){
students[roll.value]={
name:name.value,
father:father.value,
class:className.value,
gender:gender.value,
marks:[+m1.value,+m2.value,+m3.value,+m4.value,+m5.value,+m6.value]
};
localStorage.setItem("students",JSON.stringify(students));
adminMsg.innerText="Result Saved";
}

function deleteResult(){
delete students[roll.value];
localStorage.setItem("students",JSON.stringify(students));
adminMsg.innerText="Result Deleted";
}

function showResult(){
let s=students[searchRoll.value];
if(!s||s.class!==searchClass.value){
resultBox.innerHTML="<p class='fail'>Result Not Found</p>";
return;
}
let total=s.marks.reduce((a,b)=>a+b,0);
let status=total>=240?"<span class='pass'>Ú©Ø§Ù…ÛŒØ§Ø¨</span>":"<span class='fail'>Ù†Ø§Ú©Ø§Ù…</span>";
resultBox.innerHTML=`
<b>Ù†Ø§Ù…:</b> ${s.name}<br>
<b>ÙˆØ§Ù„Ø¯:</b> ${s.father}<br>
<b>Ø¬Ù†Ø³:</b> ${s.gender}<br>
<b>Ú©Ù„ Ù†Ù…Ø¨Ø±:</b> ${total}<br>
<b>Ù†ØªÛŒØ¬Û:</b> ${status}`;
}

/* ===== BOOK MANAGER ===== */
function renderBookList(){
let c=className.value;
let tbody=document.getElementById("bookTable");
tbody.innerHTML="";
(books[c]||[]).forEach((b,i)=>{
tbody.innerHTML+=`
<tr>
<td><input value="${b}" onchange="editBook('${c}',${i},this.value)"></td>
<td><button class="small-btn" onclick="deleteBook('${c}',${i})">âŒ</button></td>
</tr>`;
});
}

function addBook(){
let c=className.value;
if(!books[c]) books[c]=[];
books[c].push(newBook.value);
newBook.value="";
saveBooks();
renderBookList();
}

function editBook(c,i,val){
books[c][i]=val;
saveBooks();
}

function deleteBook(c,i){
books[c].splice(i,1);
saveBooks();
renderBookList();
}

/* ===== BACKUP ===== */
function downloadBackup(){
let data={students,books};
let a=document.createElement("a");
a.href=URL.createObjectURL(new Blob([JSON.stringify(data)],{type:"application/json"}));
a.download="anwar-ul-uloom-backup.json";
a.click();
}

function importBackup(){
let f=importFile.files[0];
let r=new FileReader();
r.onload=()=>{
let data=JSON.parse(r.result);
students=data.students||{};
books=data.books||{};
localStorage.setItem("students",JSON.stringify(students));
saveBooks();
renderBookList();
adminMsg.innerText="Backup Restored";
};
r.readAsText(f);
}
</script>
</body>
</html>
